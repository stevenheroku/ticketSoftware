@model Bdl_Grupo2_ProyectoFinal_A.Tickets


<head>
    @{
        ViewBag.Title = "Crear Ticket";
        Layout = null;
    }
    <meta http-equiv="refresh" content="30"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    
    <title>@ViewBag.Title</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"
          rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.css"
          rel="stylesheet" />
    <link href="~/Css/css/bootstrap.min.css" rel="stylesheet" />
</head>
<body style="overflow: hidden; background-color: #CCCCFF;">
    <div class="container animate__animated animate__fadeIn w3_" style="margin-top: 125px; padding: 0px 200px 0px 200px;">
        <div class="card login-form">
            <div class="card-body">
                <form action="/Ticket/Crear" method="post" class="needs-validation" novalidate>
                    <input type="text" name="Tkt_Codigo" id="Tkt_Codigo" value="@Model.Tkt_Codigo" class="form-control" hidden />
                    <input type="text" name="Tec_Id" id="Tec_Id" value="@Model.Tec_Id" class="form-control" hidden />
                    <input type="text" name="Usr_Id" id="Usr_Id" value="@Model.Usr_Id" class="form-control" hidden />
                    <h2 class="display-5" style="margin-top: 10px; margin-bottom: 10px;">Crear Ticket</h2>
                    <div class="row" style="margin-top: 10px;">
                        <div class="col">
                            <label class="form-label select-label">Prioridad Ticket</label>
                            <!--  @Html.DropDownList("TktPrd_Id", null, htmlAttributes: new { @class = "form-control" })-->
                        </div>
                    </div>
                    <hr />
                    <div class="row" style="margin-top: 10px;">
                        <div class="col-sm-7">
                            <label class="form-label select-label">Problema Técnico</label>
                            <!--   @Html.DropDownList("PrbTc_Id", null, htmlAttributes: new { @class = "form-control" })-->
                        </div>
                            <div class="col-sm">
                                <label class="form-label select-label">Código Equipo</label>
                                <input type="text" name="Eqs_Codigo" id="Eqs_Codigo" class="form-control" placeholder="XXXX" aria-describedby="inputGroupPrepend" required />
                                <div class="invalid-feedback" style="font-size: 8px;">
                                    *Este campo es obligatorio.
                                </div>
                            </div>
                        </div>
                        <hr />
                        <div class="row" style="margin-top: 10px;">
                            <div class="col">
                                <label class="form-label select-label">Descripción</label>
                                <textarea class="form-control" id="Tkt_Descripcion" name="Tkt_Descripcion" rows="2" placeholder="-"></textarea>
                            </div>
                        </div>
                        <div class="row" style="margin-top: 20px;">
                            <div class="col">
                                <input type="submit" value="Crear" class="btn btn-primary" />
                                <a class="btn btn-info" href="~/Equipo/CrearEquipo">
                                    Añadir Equipo
                                </a>
                                <a class="btn btn-light" href="~/Ticket/ListTicketsUser">
                                    Mis Tickets
                                </a>
                                <a class="btn btn-link" href="mailto:cgarciap8@gmail.com?body=Ingrese%20el%20código%20del%20ticket:">
                                    Soporte
                                </a>

                            </div>
                        </div>
                    </form>
                    <form action="/Usuarios/SignOut" method="post">
                        <input type="submit" value="Cerrar Sesión" class="btn btn-light" style="position: absolute; right:0px; top:-50px;" />
                    </form>
                </div>
                @if (Model.aceptado == 2)
                {
                    <div class="alert alert-danger" role="alert" style="position: absolute;top:20px;left: 40em;">
                        Ha ocurrido un error, comuniquese con <a href="mailto:cgarciap8@miumg.edu.gt">soporte</a>.
                    </div>
                }
                else if (Model.aceptado == 3)
                {
                    <div class="alert alert-danger" role="alert" style="position: absolute;top:20px;left: 45em;">
                        Código de equipo no existe.
                    </div>
                }
                else if (Model.aceptado == 1)
                {
                    <div id="alerts" class="alert alert-success alert-dismissible fade show" style="position: absolute;top:10px;left: 40em;">
                        Ticket enviado exitosamente, te informaremos por medio de tu correo electrónico.
                        <button id="c_alert" class="close">
                            <span style="position: absolute; right:15px; top:10px;" aria-hidden="true">&times;</span>
                        </button>
                    </div>
                }
            </div>
            <hr />
        </div>
        <script>
            const targetDiv = document.getElementById("alerts");
            const btn = document.getElementById("c_alert");
            btn.onclick = function () {
                targetDiv.style.display = "none";
            };
            (function () {
                '';
                window.addEventListener('load', function () {
                    var forms = document.getElementsByClassName('needs-validation');
                    var validation = Array.prototype.filter.call(forms, function (form) {
                        form.addEventListener('submit', function (event) {
                            if (form.checkValidity() === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                            form.classList.add('was-validated');
                        }, false);
                    });
                }, false);
            })();

        </script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/3.6.0/mdb.min.js"></script>
    </body>


